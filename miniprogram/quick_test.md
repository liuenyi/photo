# 🧪 快速测试指南

## 新的登录流程测试

### 1. 首次使用（未登录状态）
- 打开小程序
- 应该显示登录页面
- 输入密码 `0525` 
- 成功登录后跳转到首页

### 2. 已登录状态测试
- 关闭小程序
- 重新打开小程序
- **应该直接进入首页**（不再需要重新登录）
- 可以看到相册列表

### 3. 手动退出登录测试  
- 在首页点击右上角设置按钮 ⚙️
- 选择"退出登录"
- 确认退出
- 应该返回登录页面

### 4. 期待的日志输出

#### 已登录用户重新打开应用：
```
[启动] 咱家的记忆应用启动
[清理] ✅ 缓存数据已清理完成，登录状态已保留
🔐 登录页面加载开始
🔍 检查登录状态: {isLoggedIn: true, hasToken: true}
✅ 用户已登录，跳转到首页
🏠 ===== Home页面onLoad开始 =====
✅ ===== 登录检查通过，开始加载首页数据 =====
```

#### 未登录用户：
```
[启动] 咱家的记忆应用启动
[清理] ✅ 缓存数据已清理完成，登录状态已保留
🔐 登录页面加载开始
🔍 检查登录状态: {isLoggedIn: false, hasToken: false}
📝 用户未登录，显示登录页面
```

## ✅ 现在的优势
- **保持登录状态** - 用户只需要登录一次
- **缓存清理** - 每次启动清理数据缓存，保证数据新鲜
- **退出登录选项** - 用户可以主动退出
- **用户体验佳** - 不再需要每次都重新登录

## 🔧 如果需要清除登录状态（调试用）
在微信开发者工具 Console 中运行：
```javascript
wx.removeStorageSync('isLoggedIn')
wx.removeStorageSync('accessToken')
console.log('已清除登录状态，重启应用将显示登录页面')
``` 